<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your Own Ice Cream - Simply Scoop</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .ice-cream-container {
            width: 150px;
            height: 200px;
            position: relative;
            margin: 0 auto;
        }
        .scoop {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 0;
            transition: all 0.3s ease;
            box-shadow: inset -5px -5px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .cone {
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-top: 100px solid #E6B17E;
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        .topping {
            position: absolute;
            z-index: 2;
            pointer-events: none;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
        .topping.sprinkles {
            background-image: 
                radial-gradient(circle at 20% 20%, #FF69B4 2px, transparent 2px),
                radial-gradient(circle at 80% 20%, #FFD700 2px, transparent 2px),
                radial-gradient(circle at 50% 50%, #00FF00 2px, transparent 2px),
                radial-gradient(circle at 20% 80%, #FF69B4 2px, transparent 2px),
                radial-gradient(circle at 80% 80%, #FFD700 2px, transparent 2px);
            background-size: 20px 20px;
            opacity: 0.8;
        }
        .topping.cherry {
            width: 15px;
            height: 15px;
            background: #FF0000;
            border-radius: 50%;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .topping.drizzle {
            background-image: 
                linear-gradient(45deg, transparent 45%, #8B4513 45%, #8B4513 55%, transparent 55%),
                linear-gradient(-45deg, transparent 45%, #8B4513 45%, #8B4513 55%, transparent 55%);
            background-size: 12px 12px;
            opacity: 0.8;
        }
        .topping.nuts {
            background-image: 
                radial-gradient(circle at 30% 30%, #8B4513 2px, transparent 2px),
                radial-gradient(circle at 70% 30%, #8B4513 2px, transparent 2px),
                radial-gradient(circle at 50% 70%, #8B4513 2px, transparent 2px);
            background-size: 15px 15px;
            opacity: 0.8;
        }
        .topping.marshmallows {
            background-image: 
                radial-gradient(circle at 25% 25%, #FFFFFF 3px, transparent 3px),
                radial-gradient(circle at 75% 25%, #FFFFFF 3px, transparent 3px),
                radial-gradient(circle at 50% 75%, #FFFFFF 3px, transparent 3px);
            background-size: 15px 15px;
            opacity: 0.8;
        }
        .specks {
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 20%, #8B4513 2px, transparent 2px),
                radial-gradient(circle at 80% 20%, #8B4513 2px, transparent 2px),
                radial-gradient(circle at 50% 50%, #8B4513 2px, transparent 2px),
                radial-gradient(circle at 20% 80%, #8B4513 2px, transparent 2px),
                radial-gradient(circle at 80% 80%, #8B4513 2px, transparent 2px);
            background-size: 12px 12px;
            opacity: 0.5;
        }
        #toppings-container {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-pink-50">
    <header>
        <nav class="bg-white shadow-md">
            <div class="container mx-auto px-4 py-3 flex justify-between items-center">
                <div class="logo">
                    <h1 class="text-2xl font-bold text-pink-600">Simply Scoop</h1>
                </div>
                <div class="nav-links flex space-x-6">
                    <a href="index.html" class="text-black hover:text-olive-600">Home</a>
                    <a href="custom-ice-cream.html" class="text-black hover:text-olive-600">Create Your Own</a>
                    <a href="track-order.html" class="text-black hover:text-olive-600">Track Order</a>
                    <a href="cart.html" class="relative">
                        <i class="fas fa-shopping-cart text-black hover:text-olive-600"></i>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-pink-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-8 text-pink-600">Create Your Perfect Ice Cream</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Preview Section -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Your Creation</h3>
                    <div class="flex flex-col items-center justify-center h-96">
                        <div class="ice-cream-container">
                            <div id="scoop" class="scoop"></div>
                            <div id="cone" class="cone"></div>
                            <div id="toppings-container"></div>
                        </div>
                    </div>
                    <div class="mt-4 text-center">
                        <p class="text-gray-600">Base Price: $4.99</p>
                        <p class="text-gray-600">Each Topping: $0.99</p>
                        <p class="text-xl font-bold text-pink-600 mt-2">Total: $<span id="total-price">4.99</span></p>
                    </div>
                </div>

                <!-- Form Section -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">Customize Your Ice Cream</h3>
                    
                    <!-- Flavor Selection -->
                    <div class="mb-6">
                        <h4 class="font-bold text-gray-700 mb-3">Choose Your Flavor</h4>
                        <select id="flavor-select" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500">
                            <option value="vanilla">Vanilla</option>
                            <option value="chocolate">Chocolate</option>
                            <option value="strawberry">Strawberry</option>
                            <option value="mango">Mango</option>
                            <option value="blueberry">Blueberry</option>
                            <option value="pistachio">Pistachio</option>
                            <option value="cookies-cream">Cookies & Cream</option>
                        </select>
                    </div>

                    <!-- Toppings Selection -->
                    <div class="mb-6">
                        <h4 class="font-bold text-gray-700 mb-3">Add Toppings</h4>
                        <div class="space-y-2">
                            <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-pink-50 cursor-pointer">
                                <input type="checkbox" name="toppings" value="sprinkles" class="text-pink-500">
                                <span class="text-gray-700">Rainbow Sprinkles</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-pink-50 cursor-pointer">
                                <input type="checkbox" name="toppings" value="cherry" class="text-pink-500">
                                <span class="text-gray-700">Cherry</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-pink-50 cursor-pointer">
                                <input type="checkbox" name="toppings" value="drizzle" class="text-pink-500">
                                <span class="text-gray-700">Chocolate Drizzle</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-pink-50 cursor-pointer">
                                <input type="checkbox" name="toppings" value="nuts" class="text-pink-500">
                                <span class="text-gray-700">Crushed Nuts</span>
                            </label>
                            <label class="flex items-center space-x-3 p-3 border rounded-lg hover:bg-pink-50 cursor-pointer">
                                <input type="checkbox" name="toppings" value="marshmallows" class="text-pink-500">
                                <span class="text-gray-700">Mini Marshmallows</span>
                            </label>
                        </div>
                    </div>

                    <button id="save-creation" class="w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300">
                        Save Your Creation
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-white mt-12">
        <div class="container mx-auto px-4 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="footer-section">
                    <h4 class="font-bold text-gray-800 mb-2">Visit Us</h4>
                    <p class="text-gray-600">123 Ice Cream Lane</p>
                    <p class="text-gray-600">Sweet Town, ST 12345</p>
                </div>
                <div class="footer-section">
                    <h4 class="font-bold text-gray-800 mb-2">Hours</h4>
                    <p class="text-gray-600">Mon-Fri: 11am - 10pm</p>
                    <p class="text-gray-600">Sat-Sun: 10am - 11pm</p>
                </div>
                <div class="footer-section">
                    <h4 class="font-bold text-gray-800 mb-2">Contact</h4>
                    <p class="text-gray-600">Phone: (555) 123-4567</p>
                    <p class="text-gray-600">Email: info@simplyscoop.com</p>
                </div>
            </div>
            <div class="text-center mt-8 pt-8 border-t border-gray-200">
                <p class="text-gray-600">&copy; 2024 Simply Scoop. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="cart.js"></script>
    <script>
        // Color mapping for flavors
        const flavorColors = {
            vanilla: '#F3E5AB',
            chocolate: '#7B3F00',
            strawberry: '#FFB6C1',
            mango: '#FFD700',
            blueberry: '#4169E1',
            pistachio: '#98FF98',
            'cookies-cream': '#D3D3D3'
        };

        // Topping styles mapping
        const toppingStyles = {
            sprinkles: '<div class="topping sprinkles"></div>',
            cherry: '<div class="topping cherry"></div>',
            drizzle: '<div class="topping drizzle"></div>',
            nuts: '<div class="topping nuts"></div>',
            marshmallows: '<div class="topping marshmallows"></div>'
        };

        // Update preview based on selections
        function updatePreview() {
            const selectedFlavor = document.getElementById('flavor-select').value;
            const selectedToppings = Array.from(document.querySelectorAll('input[name="toppings"]:checked')).map(cb => cb.value);
            
            // Update scoop color
            const scoop = document.getElementById('scoop');
            scoop.style.backgroundColor = flavorColors[selectedFlavor];
            
            // Add specks for cookies & cream
            if (selectedFlavor === 'cookies-cream') {
                scoop.innerHTML = '<div class="specks"></div>';
            } else {
                scoop.innerHTML = '';
            }
            
            // Update toppings
            const toppingsContainer = document.getElementById('toppings-container');
            toppingsContainer.innerHTML = selectedToppings.map(topping => 
                toppingStyles[topping]
            ).join('');
            
            // Update price
            const basePrice = 4.99;
            const toppingPrice = 0.99;
            const totalPrice = basePrice + (selectedToppings.length * toppingPrice);
            document.getElementById('total-price').textContent = totalPrice.toFixed(2);
        }

        // Save creation to cart
        function saveCreation() {
            const selectedFlavor = document.getElementById('flavor-select').value;
            const selectedToppings = Array.from(document.querySelectorAll('input[name="toppings"]:checked')).map(cb => cb.value);
            const basePrice = 4.99;
            const toppingPrice = 0.99;
            const totalPrice = basePrice + (selectedToppings.length * toppingPrice);

            const customIceCream = {
                id: Date.now(),
                name: `Custom ${selectedFlavor.charAt(0).toUpperCase() + selectedFlavor.slice(1)} Creation`,
                flavor: selectedFlavor,
                toppings: selectedToppings,
                price: totalPrice,
                image: 'images/custom-ice-cream.jpg'
            };

            cart.addItem(customIceCream);
            showToast('Your custom creation has been added to cart!');
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1500);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Update cart count
            cart.updateCartCount();

            // Add event listeners for form inputs
            document.getElementById('flavor-select').addEventListener('change', updatePreview);
            document.querySelectorAll('input[name="toppings"]').forEach(input => {
                input.addEventListener('change', updatePreview);
            });

            // Add event listener for save button
            document.getElementById('save-creation').addEventListener('click', saveCreation);

            // Initial preview update
            updatePreview();
        });
    </script>
</body>
</html>